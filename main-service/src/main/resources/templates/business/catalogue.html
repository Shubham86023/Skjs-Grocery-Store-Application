<!DOCTYPE html>
<html class="no-js" lang="en" xmlns="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>Listings | Skjs Grocery Store</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet"/>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Cairo:400,600,700&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Poppins:600&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400i,700i" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Ubuntu&amp;display=swap" rel="stylesheet"/>
    <link href="assets/productImages/favicon.png" rel="shortcut icon" type="image/x-icon"/>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/animate.min.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/nice-select.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/slick.min.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/style.css" rel="stylesheet" type="text/css"/>

    <th:block th:insert="~{themes}"></th:block>
    <link href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<style>
    .nice-select {
      width: 180px;
      right: 70px !important;
    }
    .search_button {
      width: 60px !important;
    }
    a {
      text-decoration: auto !important;
    }
    .block1_links {
      font-family: "Cairo";
      color: #7faf51 !important;
      font-size: 30px !important;
    }

    .tbl_head {
      font-weight: 700;
    }

    #product_list_wrapper {
      font-size: 20px !important;
    }

    .form_field {
      font-size: 17px;
      height: 35px;
      border: 1px solid !important;
      border-radius: 0.375rem !important;
    }
    .bottom_buttons {
      font-size: 17px;
      font-weight: 400;
      line-height: 1.42857143;
      padding: 6px 12px;
    }
    .has-feedback .form-control {
      padding-right: 7.5px;
    }

    .stepwizard {
      display: table;
      width: 100%;
      position: relative;
    }
    .stepwizard-row {
      display: table-row;
    }
    .stepwizard-step {
      display: table-cell;
      text-align: center;
      position: relative;
    }
    .stepwizard-row:before {
      top: 14px;
      bottom: 0;
      position: absolute;
      content: " ";
      width: 100%;
      height: 1px;
      background-color: #ccc;
    }
    .x_panel {
      border: 1px solid #e6e9ed;
      padding: 10px 17px;
    }
    .x_title {
      padding: 1px 5px 6px;
      margin-bottom: 10px;
    }
    .x_title h2 small {
      margin-left: 10px;
      font-size: 14px;
    }
    label {
      font-weight: 600;
    }
    .row {
      display: block;
    }
    .live-info {
      width: auto;
    }
    #product_list,
    #product_list_info,
    #product_list_length,
    #product_list_filter {
      font-size: 14px;
    }
</style>
<body class="biolife-body">
<!-- HEADER -->
<!-- row1 -->
<header class="header-area style-01 layout-03" id="header">
    <div th:insert="~{header_section1}"></div>
    <!-- row2 -->
    <div th:insert="~{header}"></div>
</header>
<!-- Page Contain -->

<div class="page-contain">
    <div class="main-content" id="main-content">
        <!--Block 01: Main slide-->
        <div class="container" style="font-size: 17px; margin-top: 10px">
            <a href="/bwelcome"><i aria-hidden="true" class="fa fa-arrow-left"></i> Back to Dashboard</a>
            <div class="x_panel">
                <div class="x_title">
                    <h2>
                        <strong style="color: #7faf51">Listings</strong>
                        <a class="btn btn-primary" href="/productStep1" style="float: right" title="Add">Add a
                            product</a>
                    </h2>
                    <div class="clearfix"></div>
                </div>

                <div class="x_content">
                    <form action="updatinginfo" method="post">
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="col-sm-12">
                                    <div class="card-box">
                                        <div class="result"></div>

                                        <div class="search_data_value" style="overflow: auto; white-space: nowrap">
                                            <table class="table order-list table table-striped responsive-utilities jambo_table bulk_action"
                                                   id="product_list"
                                                   style="width: 100%">
                                                <thead>
                                                <tr>
                                                    <th class="tbl_head">S.No.</th>
                                                    <th class="tbl_head">Product Status</th>
                                                    <th class="tbl_head">Product Id</th>
                                                    <th class="tbl_head">Image</th>
                                                    <th class="tbl_head" style="max-width: 350px">Product Name</th>
                                                    <th class="tbl_head">Date Created/Modified</th>
                                                    <th class="tbl_head">Avilable Qty/Amount</th>
                                                    <th class="tbl_head">Unit Price</th>
                                                    <th class="tbl_head" style="width: 110px">Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr th:each="product, iterationStatus : ${product_list}">
                                                    <td th:text="${iterationStatus.index + 1}"></td>
                                                    <td style="color: green" th:if="${product[6] == 1}">Active</td>
                                                    <td style="color: red" th:if="${product[6] == 0}">Incompleted</td>
                                                    <td th:text="${product[1]}"></td>
                                                    <td>
                                                        <img class="product-thumnail"
                                                             height="50"
                                                             th:alt="${product[2]}" th:if="${product[7] != null}"
                                                             th:src="@{productImages/product1/{pid}/{name}(name=${product[7]},pid=${product[0]})}"
                                                             width="50"/>
                                                        <span th:if="${product[7] == null}">N/A</span>
                                                    </td>
                                                    <td th:text="${product[2]}"></td>
                                                    <td th:text="${product[8] == null} ? '-' : ${product[8]}"></td>
                                                    <td th:style="${product[3]} != null ? ((${product[3]} < 8) ? 'color: red;' : 'color: green;') : ''"
                                                        th:text="(${product[3] == null} ? '-' : ${product[3]}) + ' ' + (${product[4] == null} ? '' : ${product[4]})"></td>
                                                    <td th:text="${product[5] == null} ? '-' : ${product[5]}"></td>
                                                    <td>
                                                        <a class="btn btn-primary"
                                                           th:href="@{editProductStep1/{id}(id=${product[0]})}"
                                                           title="Edit Sale"><i aria-hidden="true"
                                                                                class="fa fa-pencil"></i> Edit
                                                            Product</a>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- FOOTER -->
<div style="margin-top: 50px" th:insert="~{footer}"></div>

<!--Footer For Mobile-->
<div th:insert="~{footer_section1}"></div>

<!-- Scroll Top Button -->
<a class="btn-scroll-top"><i class="biolife-icon icon-left-arrow"></i></a>

<script src="assets/js/jquery-3.4.1.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/jquery.countdown.min.js"></script>
<script src="assets/js/jquery.nice-select.min.js"></script>
<script src="assets/js/jquery.nicescroll.min.js"></script>
<script src="assets/js/slick.min.js"></script>
<script src="assets/js/biolife.framework.js"></script>
<script src="assets/js/functions.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
        src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha256-xLD7nhI62fcsEZK2/v8LsBcb4lG7dgULkuXoXB/j91c="
        src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

<script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>

<script type="text/javascript">
    var table;
    $(document).ready(function () {
      table = $("#product_list").DataTable();

      $(document).on("click", ".deletebtn", function () {
        var pid = $(this).attr("cid");
        var confirmation = confirm("Are you sure You want To Delete This Product?");
        if (confirmation) {
          $.ajax({
            url: "/deleteProduct",
            type: "POST",
            data: {
              pid: pid,
            },
            success: function (result) {
              if (result) {
                $('[cid="' + pid + '"]')
                  .closest("tr")
                  .remove();
              } else {
              }
            },
          });
        }
      });
    });
</script>
</body>
</html>
