<!DOCTYPE html>
<html class="no-js" lang="en" xmlns="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>Edit Profile | Skjs Grocery Store</title>
    <link href="https://fonts.googleapis.com/css?family=Cairo:400,600,700&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Poppins:600&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400i,700i" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Ubuntu&amp;display=swap" rel="stylesheet"/>
    <link href="assets/productImages/favicon.png" rel="shortcut icon" type="image/x-icon"/>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/animate.min.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/nice-select.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/slick.min.css" rel="stylesheet" type="text/css"/>
    <link href="assets/css/style.css" rel="stylesheet" type="text/css"/>
    <th:block th:insert="~{themes}"></th:block>
    <link href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" rel="stylesheet"/>
</head>
<style>
    .nice-select {
      width: 180px;
      right: 70px !important;
    }
    .search_button {
      width: 60px !important;
    }
    a {
      text-decoration: auto !important;
    }
    .block1_links {
      font-family: "Cairo";
      color: #7faf51 !important;
      font-size: 30px !important;
      text-decoration: underline !important;
    }
    .block1_links:hover {
      color: #e73918 !important;
      text-decoration: none !important;
    }
    .tbl_head {
      font-weight: 700;
    }
    .form_field {
      border: 1px solid #e73918 !important;
    }
</style>
<body class="biolife-body">
<!-- HEADER -->
<!-- row1 -->
<header class="header-area style-01 layout-03" id="header">
    <div th:insert="~{header_section1}"></div>

    <!-- row2 -->
    <div th:insert="~{header}"></div>
</header>

<!-- Page Contain -->
<div class="page-contain">
    <!-- Main content -->
    <div class="main-content" id="main-content">
        <!--Block 02: Product Tab-->
        <div class="product-tab z-index-20 sm-margin-top-150px">
            <div class="container" style="font-size: 17px">
                <div style="padding: 20px 0 10px 0">
                    <a href="/welcome" style="font-size: 20px"><i aria-hidden="true" class="fa fa-arrow-left"></i> Back
                        to Home</a>
                </div>
                <p style="color: red">Fields mark with * are mandatory</p>
                <div class="form-group" th:if="${message}">
                    <div class="input-icon">
                        <div class="alert alert-dismissible" id="successMessage" th:classappend="${messageType}"
                             th:text="${message}"></div>
                    </div>
                </div>
                <div class="row">
                    <hr/>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="signin-container" style="margin-top: 0px">
                            <form action="editingProfile" id="myForm" method="post" name="frm-login"
                                  th:object="${signup_data}">
                                <p class="col-md-4 col-sm-4 form-row">
                                    <label for="fid-name">Full Name:<span class="requite">*</span></label>
                                    <input class="txt-input form_field" id="fullName" name="fullName"
                                           placeholder="Enter Full Name"
                                           tabindex="1" th:value="${signup_data.fullName}"
                                           type="text"/>
                                </p>

                                <p class="col-md-4 col-sm-4 form-row">
                                    <label for="fid-name">Email Address:<span class="requite">*</span></label>
                                    <input class="txt-input form_field" id="email" name="email" placeholder="Email"
                                           tabindex="1" th:value="${signup_data.email}"
                                           type="email"/>
                                </p>
                                <p class="col-md-4 col-sm-4 form-row">
                                    <label for="fid-name">Phone Number:<span class="requite">*</span></label>
                                    <input class="txt-input form_field" id="moblieNumber" name="moblieNumber"
                                           placeholder="Phone Number" required style="border: 1px solid #e6e6e6"
                                           tabindex="1" th:value="${signup_data.moblieNumber}" type="number"/>
                                </p>

                                <p class="col-md-4 col-sm-4 form-row">
                                    <label for="fid-name">Date Of Birth:<span class="requite">*</span></label>
                                    <input class="txt-input form_field" id="dob" name="dob" placeholder="DOB" required
                                           tabindex="1" th:value="${signup_data.dob}" type="text"/>
                                </p>

                                <p class="col-md-4 col-sm-4 form-row">
                                    <label for="fid-pass">Password:<span class="requite">*</span></label>
                                    <input class="txt-input form_field" id="password" name="password"
                                           placeholder="Password"
                                           type="text" value=""/>
                                </p>
                                <div class="clearfix"></div>
                                <p class="col-md-4 col-sm-4">Addresses:</p>
                                <div class="col-md-10 col-sm-10 form-row dynamic-added" style="padding-left: 0px"
                                     th:each="address,iterationStatus : ${all_address}"
                                     th:id="'row1' + ${iterationStatus.index}">
                                    <input class="addressId" name="addressId[]" th:value="${address.id}" type="hidden"/>
                                    <p class="col-md-8 col-sm-8">
                                        <textarea class="txt-input form_field addressList" name="address"
                                                  placeholder="Enter Address..."
                                                  required style="width: -webkit-fill-available"
                                                  th:text="${address.address}"
                                                  type="text"></textarea>
                                    </p>

                                    <p class="col-md-2 col-sm-2 addclasss">
                                        <button class="btn btn-success New-Villagebtn" id="addmorebutton" name="add"
                                                th:if="${iterationStatus.index} == 0" type="button"><strong>ADD
                                            MORE</strong></button>
                                        <button class="btn btn-danger btn_remove" name="remove"
                                                th:id="'row1' + ${iterationStatus.index}"
                                                th:unless="${iterationStatus.index} == 0"
                                                type="button">REMOVE
                                        </button>
                                    </p>
                                </div>

                                <div class="clearfix"></div>
                                <p class="form-row wrap-btn">
                                    <button class="btn btn-submit btn-bold"
                                            th:attr="style=${account_type == 'business'} ? 'background-color:#7faf51;'"
                                            type="submit">UPDATE
                                    </button>
                                </p>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- FOOTER -->
<div th:insert="~{footer}"></div>

<!--Footer For Mobile-->
<div th:insert="~{footer_section1}"></div>

<!-- Scroll Top Button -->
<a class="btn-scroll-top"><i class="biolife-icon icon-left-arrow"></i></a>

<script src="assets/js/jquery-3.4.1.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/jquery.countdown.min.js"></script>
<script src="assets/js/jquery.nice-select.min.js"></script>
<script src="assets/js/jquery.nicescroll.min.js"></script>
<script src="assets/js/slick.min.js"></script>
<script src="assets/js/biolife.framework.js"></script>
<script src="assets/js/functions.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
        src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha256-xLD7nhI62fcsEZK2/v8LsBcb4lG7dgULkuXoXB/j91c="
        src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

<script type="text/javascript">
    var table;
    $(document).ready(function () {
      $("#dob").datepicker({ dateFormat: "dd/mm/yy" });
      setTimeout(function () {
        $(".alert").alert("close");
      }, 3000);

      //address script
      $("#myForm").submit(function () {
        $(".dynamic-added").each(function (index, row) {
          var inputValue = $(row).find(".addressList").val();
          var newString = inputValue.replace(/,/g, "/");
          $(row).find(".addressList").val(newString);
        });
      });

      var iCnt = $(".addressId").length;
      $("#addmorebutton").click(function () {
        if (iCnt < 5) {
          var ele = $(this).closest(".dynamic-added").clone(true);
          ele.attr("id", "row" + iCnt);
          ele.find(".addressList").val("");
          ele.find(".addressId").val("");
          ele.find(".addclasss").html("");
          ele.find(".addclasss").html('<button type="button" name="remove" id="row' + iCnt + '" class="btn btn-danger btn_remove">REMOVE</button>');
          $(".dynamic-added:last").after(ele);

          iCnt += 1;
        } else {
          alert("You can add upto 5 addresses only.");
        }
      });

      $(document).on("click", ".btn_remove", function () {
        var addressId = $(this).closest(".dynamic-added").find(".addressId").val();
        if (addressId != "") {
          var confirmation = confirm("Are you sure You want To Delete This Address?");
          if (confirmation) {
            $.ajax({
              url: "/removeUserAddress",
              method: "POST",
              data: {
                addressId: addressId,
              },
              success: function (data) {},
            });
            iCnt -= 1;
            var button_id = $(this).attr("id");
            $("#" + button_id + "").remove();
          }
        } else {
          iCnt -= 1;
          var button_id = $(this).attr("id");
          $("#" + button_id + "").remove();
        }
      });
    });
</script>
</body>
</html>
